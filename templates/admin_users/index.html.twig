{% extends 'back.html.twig' %}

{% block title %}Hello AdminUsersController!{% endblock %}

{% block body %}
<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

{% block content %}
   <div style="background-color: #000000">
       <div class="row my-5 mx-3">
           <div class="col-12 grid-margin">
               <div class="card">
                   <div class="card-body">
                       <h4 class="card-title">Utilisateurs</h4>

                           <form method="get" class=" d-flex justify-content-end">
                               <input type="text" placeholder="email" style="width: 200px" class="form-control p_input mr-2" name="email"/>
                               <input type="text" placeholder="nom" style="width: 200px" class="form-control p_input mr-2" name="nom"/>
                               <button style="background-color: #FFB320 ; color: white" class="btn" type="submit">Recherche</button>
                           </form>

                       <div class="table-responsive">
                           <table class="table">
                               <thead>
                               <tr>
                                   <th> Nom de client </th>
                                   <th> Email </th>
                                   <th> Numéro de Téléphone </th>
                                   <th> Role </th>
                                   <th> Modifier </th>
                                   <th> Supprimer </th>
                               </tr>
                               </thead>
                               <tbody>
                               {% for userr in users %}
                                   {% if userr.email is not same as app.user.username   %}
                                       <tr>

                                           <td> {{ userr.nom }} {{ userr.prenom }} </td>
                                           <td> {{userr.email}} </td>
                                           <td> {{ userr.numTel }} </td>
                                           <td> {% for role in userr.roles%}
                                                   {% if role == "ROLE_ADMIN" %}
                                                        Administrateur
                                                   {% else %}
                                                          Utilisateur
                                                   {% endif %}
                                               {% endfor %}
                                           </td>
                                           <td> <a href="/admin/users/{{ userr.idUser }}">
                                                   <div class="badge badge-outline-success">Modifier</div>
                                               </a>
                                           <td>

                                                   <a href="/admin/users/delete/{{ userr.idUser }}">
                                                       <div class="badge badge-outline-danger">Supprimer</div>
                                                   </a>

                                           </td>
                                       </tr>
                                   {% endif %}
                               {% endfor %}

                               </tbody>
                           </table>
                       </div>
                   </div>
               </div>
           </div>
       </div>
   </div>
    {% endblock %}
{% endblock %}
